<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.backend.mapper.UserMapper">

    <resultMap id="userMap" type="User">
        <id property="idx" column="idx"/>
        <result property="userId" column="user_id"/>
        <result property="userPw" column="user_pw"/>
    </resultMap>

        <insert id="insertUser">
            <selectKey keyProperty="idx" order="BEFORE" resultType="long">
                select user_seq.nextval from dual
            </selectKey>
            insert into users (idx, user_id, user_pw)
            values (#{idx}, #{userId}, #{userPw})
        </insert>

        <select id="getUser" resultMap="userMap">
            select *
            from users
            where user_id = #{userId} and user_pw = #{userPw}
        </select>

        <delete id="deleteUser">
            delete from users
            where user_id = #{userId} and user_pw = #{user_pw}
        </delete>

        <update id="updateUser">
                update users
                set user_pw = #{userPw}
                where user_id = #{userId}
        </update>

        <select id="validateId" parameterType="String" resultType="int">
            select COUNT(*)
            from users
            where user_id = #{userId}
        </select>

</mapper>